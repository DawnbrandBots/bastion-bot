# SPDX-FileCopyrightText: Â© 2024 Kevin Lu
# SPDX-Licence-Identifier: AGPL-3.0-or-later
name: Continuous integration and deployment
on:
  push:
    branches: [master]
jobs:
  node-js:
    uses: ./.github/workflows/node.js.yml
    secrets: inherit
  docker:
    needs: node-js
    uses: ./.github/workflows/docker.yml
    secrets: inherit
  test:
    needs: docker
    if: github.ref == 'refs/heads/master'
    uses: ./.github/workflows/node.js.integration.yml
    secrets: inherit
  release:
    needs: test
    if: github.ref == 'refs/heads/master'
    uses: ./.github/workflows/release-compose.yml
    secrets: inherit
